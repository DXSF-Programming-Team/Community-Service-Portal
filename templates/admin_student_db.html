{% extends "admin_portal_base.html" %}
{% block title %}Student Database{% endblock %}
{% block head %}
    {{ super() }}
    <link rel="stylesheet" href="https://cdn.datatables.net/2.3.4/css/dataTables.dataTables.css" />
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.datatables.net/2.3.4/js/dataTables.js"></script>
{% endblock %}
{% block styles %}
    <style>
        .student-db-table-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: center;
        }
    </style>
{% endblock %}
{% block body %}
<div class="page-container">
    <h1 class="text-center header-text">Student Database</h1>
</div>
<div class="student-db-table-container">
    <table class="table table-striped table-bordered student-db-table" id="student_db_table">
        <thead>
            <tr>
                <th>ID</th>
                <th>Last Name</th>
                <th>First Name</th>
                <th>Email</th>
                <th>YOG</th>
                <th>In-School Hours</th>
                <th>Out-of-School Hours</th>
                <th>Total Hours</th>
                <th>Required Hours</th>
                <th>Hours Needed</th>
                <th>Required Hours Completed</th>
                <th>Required Out-of-School Hours Completed</th>
            </tr>
        </thead>
        <tbody>
            {% for student in students %}
                <tr>
                    <td>{{ student.user_id }}</td>
                    <td>{{ student.user.last_name }}</td>
                    <td>{{ student.user.first_name }}</td>
                    <td>{{ student.user.email }}</td>
                    <td>{{ student.graduation_year }}</td>
                    <td>{{ student.in_school_hours }}</td>
                    <td>{{ student.out_of_school_hours }}</td>
                    <td>{{ student.in_school_hours + student.out_of_school_hours }}</td>
                    <td>{{ student.required_hours }}</td>
                    <td>{{ student.required_hours - (student.in_school_hours + student.out_of_school_hours) }}</td>
                    {% if student.in_school_hours + student.out_of_school_hours >= student.required_hours %}
                        <td>Yes</td>
                    {% else %}
                        <td>No</td>
                    {% endif %}
                    {% if student.out_of_school_hours >= 1/2 * student.required_hours %}
                        <td>Yes</td>
                    {% else %}
                        <td>No</td>
                    {% endif %}
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% block scripts %}
    <script>
        $(document).ready(function() {
            $('#student_db_table').DataTable();
        });
    </script>
{% endblock %}

{% endblock %}
